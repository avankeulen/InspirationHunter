<!doctype html>
<html>
<head>
<meta charset="utf-8">
    <title>test</title>
</head>
<body>

<div id="city">unknown location</div>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script language="javascript" type="text/javascript">

var loc = document.getElementById("city");
var url = "";
var lat = "";
var lon = "";

function getLocation() {
	if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(showPosition);
    } else {
        loc.innerHTML = "Geolocation is not supported by this browser.";
    }
}
function showPosition(position) {
    lat = position.coords.latitude; 
    lon = position.coords.longitude;

    getCityFromPosition(lat, lon);
}

function getCityFromPosition(lat, lon){
    url = "https://maps.googleapis.com/maps/api/geocode/json?latlng=" + lat + "," + lon + "&sensor=false&key=AIzaSyCVvQeila2uW_EHtmzE3Ol34HH5XWyXc7A";

    window.jQuery.ajax({
        url: url,
        dataType: "json",
        success: function (data) {
            loc.innerHTML = data.results[0].address_components[2].long_name;
        }
    });
}

$( document ).ready(function() {
	getLocation();
});


</script>

</body>
</html>
